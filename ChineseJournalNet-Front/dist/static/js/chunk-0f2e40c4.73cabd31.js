(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-0f2e40c4","chunk-a2024f84"],{"460f":function(e,t,s){"use strict";s.d(t,"a",(function(){return i}));s("96cf"),s("1da1");var o=s("22ce"),r="/common/";function i(){var e=Object(o["axiosOptions"])("get");return Object(o["axiosRequest"])(r+"/verifyCode",null,e)}},8980:function(e,t,s){"use strict";s.r(t);var o=function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("div",{attrs:{id:"header"}},[o("div",{staticClass:"l-width"},[o("div",{staticClass:"logo"},[o("router-link",{attrs:{to:"/qikan/index"}},[o("img",{attrs:{src:s("9d64"),alt:"维普期刊服务平台"}})])],1),o("ul",{staticClass:"head-nav"},[o("li",[o("a",{attrs:{href:"javasript:void(0)"},on:{click:e.jumpJournalIndex}},[e._v("期刊导航")])])]),o("ul",{staticClass:"user-nav",attrs:{id:"user-nav"}},[e.info.id?o("li",[o("a",{attrs:{href:"javascript:void(0)"}},[o("i",{staticClass:"icon-login"}),e._v(e._s(e.info.userName))])]):o("li",[o("a",{attrs:{href:"javascript:void(0)",id:"login-btn"},on:{click:function(t){return e.$refs.login.show()}}},[o("i",{staticClass:"icon-login"}),e._v("登录")])]),e.info.id?o("li",[o("a",{attrs:{href:"javascript:void(0)"},on:{click:function(t){return e.$store.dispatch("front/user/logout")}}},[o("d2-icon",{attrs:{name:"sign-out"}}),e._v("退出")],1)]):e._e()])]),o("login",{ref:"login"})],1)},r=[],i=(s("ac1f"),s("5319"),s("5530")),n=s("bfba"),a=s("2f62"),l={name:"Header",components:{login:n["default"]},data:function(){return{userInfo:{},codeUrl:"",searchParams:[]}},computed:Object(i["a"])({},Object(a["e"])("front/user",["info"])),mounted:function(){this.info.id||!1!==this.logoutSign||this.$store.dispatch("front/user/tryIpLogin")},methods:{jumpJournalIndex:function(){"/journal/index"===this.$route.path?this.$router.replace("/refresh"):this.$router.push({path:"/journal/index"})}}},c=l,u=s("2877"),d=Object(u["a"])(c,o,r,!1,null,null,null);t["default"]=d.exports},"9d64":function(e,t,s){e.exports=s.p+"static/img/logo.48da0f98.png"},bfba:function(e,t,s){"use strict";s.r(t);var o=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",[s("el-dialog",{attrs:{title:"用户登录",visible:e.visible,width:"25%","before-close":e.close,"close-on-click-modal":!1,inline:!0,"modal-append-to-body":!1,"append-to-body":!0},on:{"update:visible":function(t){e.visible=t}}},[s("el-form",{ref:"loginForm",attrs:{model:e.userInfo}},[s("el-form-item",{attrs:{label:"用户名",prop:"userName","label-width":"80px",rules:{required:!0,message:"请输入用户名!",trigger:"blur"}}},[s("el-input",{attrs:{placeholder:"请输入用户名"},model:{value:e.userInfo.userName,callback:function(t){e.$set(e.userInfo,"userName",t)},expression:"userInfo.userName"}})],1),s("el-form-item",{attrs:{label:"密码",prop:"password","label-width":"80px",rules:{required:!0,message:"请输入密码!",trigger:"blur"}}},[s("el-input",{attrs:{type:"password",placeholder:"请输入密码"},model:{value:e.userInfo.password,callback:function(t){e.$set(e.userInfo,"password",t)},expression:"userInfo.password"}})],1),s("el-form-item",{attrs:{prop:"code",label:"验证码","label-width":"80px",rules:{required:!0,message:"请输入验证码!",trigger:"blur"}}},[s("el-input",{attrs:{type:"text",placeholder:"验证码"},model:{value:e.userInfo.code,callback:function(t){e.$set(e.userInfo,"code",t)},expression:"userInfo.code"}},[s("template",{slot:"append"},[s("img",{staticClass:"login-code",attrs:{src:e.codeUrl},on:{click:e.getCode}})])],2)],1)],1),s("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[s("el-button",{staticStyle:{width:"48%"},attrs:{type:"primary"},on:{click:e.submit}},[e._v("登录")]),s("el-button",{staticStyle:{width:"48%"},attrs:{type:"success"},on:{click:e.tryIpLogin}},[e._v("Ip登录")])],1)],1)],1)},r=[],i=s("5530"),n=s("460f"),a=(s("bc3a"),s("2f62")),l={data:function(){return{visible:!1,userInfo:{},codeUrl:""}},created:function(){},computed:Object(i["a"])({},Object(a["e"])("front/user",["info"])),methods:{show:function(){this.visible=!0,this.getCode()},close:function(){this.$refs.loginForm.resetFields(),this.visible=!1},getCode:function(){var e=this;Object(n["a"])().then((function(t){e.codeUrl="data:image/gif;base64,"+t.img}))},tryIpLogin:function(){var e=this;this.$store.dispatch("front/user/tryIpLogin").then((function(t){t.success?e.close():e.$message.error(t.msg)}))},submit:function(){var e=this;this.$refs.loginForm.validate((function(t){t&&e.$store.dispatch("front/user/login",e.userInfo).then((function(t){t.success?e.close():e.$message.error(t.msg)}))}))}}},c=l,u=s("2877"),d=Object(u["a"])(c,o,r,!1,null,null,null);t["default"]=d.exports}}]);