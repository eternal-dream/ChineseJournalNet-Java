(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-2d0bdd47"],{"2e53":function(e,t,a){"use strict";a.r(t);var o=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("d2-container",[a("vxe-toolbar",{attrs:{refresh:{query:e.reload},export:"",print:"",custom:""},scopedSlots:e._u([{key:"buttons",fn:function(){return[a("vxe-button",{on:{click:e.openAddResource}},[e._v("新增")]),a("vxe-button",{on:{click:e.deleteResourcesByIds}},[e._v("删除")])]},proxy:!0}])}),a("vxe-table",{ref:"xTree",attrs:{border:"","show-overflow":"","show-footer":"",height:"100%","keep-source":"","highlight-hover-row":"","highlight-hover-column":"","highlight-current-row":"","row-id":"id","print-config":{},"export-config":{},loading:e.loading,"tree-config":e.treeConfig,"edit-config":{trigger:"click",mode:"row",showStatus:!0},data:e.tableData}},[a("vxe-column",{attrs:{type:"checkbox",width:"60"}}),a("vxe-column",{attrs:{width:"15%",field:"title",title:"菜单名称","tree-node":""}}),a("vxe-column",{attrs:{align:"center",width:"35%",field:"path",title:"路由"}}),a("vxe-column",{attrs:{align:"center",width:"30%",field:"permission",title:"Permission"}}),a("vxe-column",{attrs:{align:"center",title:"操作"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-button",{attrs:{size:"small",type:"primary",icon:"el-icon-edit"},on:{click:function(a){return e.handleUpdate(t.row)}}},[e._v("修改 ")]),a("el-button",{attrs:{size:"small",type:"danger",icon:"el-icon-delete"},on:{click:function(a){return e.handleDelete(t.row)}}},[e._v("删除 ")])]}}])})],1),a("el-dialog",{attrs:{title:null==e.formData.id?"新增菜单信息":"修改菜单信息",visible:e.dialogOpen,width:"43%","append-to-body":"","close-on-click-modal":!1},on:{close:e.refreshData,"update:visible":function(t){e.dialogOpen=t}}},[a("el-form",{ref:"form",attrs:{model:e.formData,rules:e.rules,"label-width":"80px"}},[a("el-row",[a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:"菜单类型",prop:"menuType"}},[a("el-select",{attrs:{placeholder:"请选择"},model:{value:e.formData.menuType,callback:function(t){e.$set(e.formData,"menuType",t)},expression:"formData.menuType"}},e._l(e.menuTypeList,(function(e){return a("el-option",{key:e.value,attrs:{label:e.name,value:e.value}})})),1)],1)],1),a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:"上级菜单",prop:"parentId"}},[a("treeselect",{attrs:{options:e.treeData,normalizer:e.normalizer,"show-count":!0,placeholder:"选择上级菜单"},model:{value:e.formData.parentId,callback:function(t){e.$set(e.formData,"parentId",t)},expression:"formData.parentId"}})],1)],1)],1),a("el-row",[a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:"菜单名称",prop:"title"}},[a("el-input",{attrs:{placeholder:"请输入菜单名称"},model:{value:e.formData.title,callback:function(t){e.$set(e.formData,"title",t)},expression:"formData.title"}})],1)],1),a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:"路由",prop:"path"}},[a("el-input",{attrs:{placeholder:"请输入路由",type:"text"},model:{value:e.formData.path,callback:function(t){e.$set(e.formData,"path",t)},expression:"formData.path"}})],1)],1)],1),a("el-row",[a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:"组件路径",prop:e.componentValue}},[a("el-input",{attrs:{placeholder:"请输入组件路径",type:"text"},model:{value:e.formData.component,callback:function(t){e.$set(e.formData,"component",t)},expression:"formData.component"}})],1)],1),a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:"序号",prop:"sort"}},[a("el-input",{attrs:{placeholder:"序号",type:"number",max:"999999",min:"0"},model:{value:e.formData.sort,callback:function(t){e.$set(e.formData,"sort",t)},expression:"formData.sort"}})],1)],1)],1),a("el-row",[a("el-col",{attrs:{span:24}},[a("el-form-item",{attrs:{"label-width":"100px",label:"Permission",prop:"permission"}},[a("el-input",{attrs:{placeholder:"请输入Permission",type:"text"},model:{value:e.formData.permission,callback:function(t){e.$set(e.formData,"permission",t)},expression:"formData.permission"}})],1)],1)],1),a("el-row",[a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{"label-width":"90px",label:"图标",prop:"menuIcon"}},[a("d2-container",[a("div",{staticClass:"title-group"},[a("p",{staticClass:"sub-title"},[e.formData.icon?void 0:e._e()],2)]),a("d2-icon-select",{model:{value:e.formData.icon,callback:function(t){e.$set(e.formData,"icon",t)},expression:"formData.icon"}})],1)],1)],1)],1),a("el-row",[a("el-col",{attrs:{span:12}},[a("el-form-item",[a("el-switch",{attrs:{"active-text":"缓存","inactive-text":"不缓存"},model:{value:e.formData.isCache,callback:function(t){e.$set(e.formData,"isCache",t)},expression:"formData.isCache"}})],1)],1),a("el-col",{attrs:{span:12}},[a("el-form-item",[a("el-switch",{attrs:{"active-text":"隐藏","inactive-text":"不隐藏"},model:{value:e.formData.isHidden,callback:function(t){e.$set(e.formData,"isHidden",t)},expression:"formData.isHidden"}})],1)],1)],1)],1),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{attrs:{type:"primary"},on:{click:e.submitForm}},[e._v("确 定")]),a("el-button",{on:{click:e.cancelSubmit}},[e._v("取 消")])],1)],1)],1)},r=[],n=(a("d81d"),a("b0c0"),a("ca17")),l=a.n(n),s=(a("542c"),a("bc3a")),i=a.n(s),c={components:{Treeselect:l.a},data:function(){return{componentValue:"component",loading:!1,tableData:[],removeList:[],isShowSelect:!1,treeData:[],treeConfig:{children:"children",expandAll:!0},dialogOpen:!1,formData:{},rules:{menuType:[{required:!0,message:"菜单类型不能为空",trigger:"blur"}],title:[{required:!0,message:"菜单名称不能为空",trigger:"blur"}],sort:[{required:!0,message:"菜单序号不能为空",trigger:"blur"}],path:[{required:!0,message:"路由不能为空",trigger:"blur"}],component:[{required:!0,message:"组件路径不能为空",trigger:"blur"}],permission:[{required:!0,message:"权限标识不能为空",trigger:"blur"}]},menuTypeList:[{name:"目录",value:"M"},{name:"菜单",value:"C"},{name:"按钮",value:"F"}]}},created:function(){this.getResourcesByPage()},watch:{"formData.menuType":function(){"M"===this.formData.menuType?this.componentValue="":this.componentValue="component"}},methods:{handleDelete:function(e){this.deleteResources([e.id])},refreshData:function(){this.cancelSubmit()},cancelSubmit:function(){this.formData={},this.dialogOpen=!1},submitForm:function(){var e=this;this.$refs.form.validate((function(t){t&&(e.formData.name=e.formData.title,e.formData.menuUrl=e.formData.path,e.formData.menuIcon=e.formData.icon,e.$axiosRequest("/system/resource/saveOrEditResource",e.formData,e.$axiosOptions("post")).then((function(t){e.$confirm(t.msg,"提示",{showCancelButton:!1,type:t.success?"success":"warning"}),t.success&&(e.formData={},e.dialogOpen=!1,e.getResourcesByPage())})))}))},normalizer:function(e){return e.children&&!e.children.length&&delete e.children,{id:e.id,label:e.title,children:e.children}},handleUpdate:function(e){console.log(e),this.formData=JSON.parse(JSON.stringify(e)),this.dialogOpen=!0},openAddResource:function(){this.dialogOpen=!0},deleteResourcesByIds:function(){var e=this.$refs.xTree,t=e.getCheckboxRecords();if(t.length<=0)this.$confirm("请选择要删除的数据 ","提示",{showCancelButton:!1,type:"warning"});else{var a=t.map((function(e){return e.id}));this.deleteResources(a)}},deleteResources:function(e){var t=this;this.$confirm("是否确认删除这些数据项?","警告",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){i()({method:"post",url:"/system/resource/deleteResourceByIds",data:JSON.stringify(e),headers:{"Content-Type":"application/json;charset=UTF-8"},timeout:3e4,responseType:"json"}).then((function(e){console.log("res",e),t.$confirm(e.data.msg,"提示",{showCancelButton:!1,type:"200"===e.data.code?"success":"warning"}),e.data.success&&t.getResourcesByPage()}))}))},getResourcesByPage:function(){var e=this;this.loading=!0,this.$axiosRequest("/system/resource/getAllResources",null,this.$axiosOptions("get")).then((function(t){e.tableData=t.resources,e.loading=!1,e.treeData=JSON.parse(JSON.stringify(e.tableData))}))},reload:function(){return this.$refs.xTree.clearAll(),this.getResourcesByPage()}}},u=c,m=a("2877"),p=Object(m["a"])(u,o,r,!1,null,"538a6b8f",null);t["default"]=p.exports}}]);