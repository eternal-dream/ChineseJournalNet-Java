(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-2d0a3b14"],{"02ea":function(e,t,s){"use strict";s.r(t);var o=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",[s("el-dialog",{attrs:{title:e.title,visible:e.visible,width:"30%","before-close":e.close,"close-on-click-modal":!1,inline:!0},on:{"update:visible":function(t){e.visible=t}}},[s("el-form",{ref:"roleForm",attrs:{model:e.role}},[s("el-form-item",{attrs:{label:"角色名称",prop:"name","label-width":"100px",rules:{required:!0,message:"请输入角色名称!",trigger:"blur"}}},[s("el-input",{attrs:{placeholder:"请输入角色名称"},model:{value:e.role.name,callback:function(t){e.$set(e.role,"name",t)},expression:"role.name"}})],1),s("el-form-item",{attrs:{label:"描述",prop:"description","label-width":"100px"}},[s("el-input",{attrs:{type:"textarea",placeholder:"请描述角色用途"},model:{value:e.role.description,callback:function(t){e.$set(e.role,"description",t)},expression:"role.description"}})],1),s("el-form-item",{attrs:{label:"权限设置","label-width":"100px"}},[s("el-tree",{ref:"tree",attrs:{data:e.resources,"show-checkbox":"","node-key":"id","highlight-current":!0,props:{children:"children",label:"title"}},on:{"check-change":e.getChooseData},scopedSlots:e._u([{key:"default",fn:function(t){var o=t.node,r=t.data;return s("span",{staticClass:"custom-tree-node"},[s("span",[e._v(" "+e._s(o.label)+" "),"C"===r.menuType?s("el-tag",{attrs:{size:"mini"}},[e._v("菜单")]):e._e(),"M"===r.menuType?s("el-tag",{attrs:{size:"mini",type:"info"}},[e._v("目录")]):e._e(),"F"===r.menuType?s("el-tag",{attrs:{size:"mini",type:"warning"}},[e._v("按钮")]):e._e()],1)])}}])})],1)],1),s("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[s("el-button",{on:{click:e.close}},[e._v("取 消")]),s("el-button",{attrs:{"el-button":"",type:"primary"},on:{click:e.submit}},[e._v("确定")])],1)],1)],1)},r=[],i=(s("4160"),s("159b"),{props:["searchRole"],data:function(){return{visible:!1,role:{resourceIds:[]},title:"",resources:[]}},created:function(){this.getResources()},methods:{show:function(e){var t=this;this.role=JSON.parse(JSON.stringify(e)),e&&e.id?(this.title="编辑角色",e.resourceIds&&e.resourceIds.length>0&&e.resourceIds.forEach((function(e){t.$nextTick((function(){t.$refs.tree.setChecked(e,!0,!1)}))}))):this.title="新增角色",this.visible=!0},close:function(){this.$refs.roleForm.resetFields(),this.$refs.tree.setCheckedKeys([]),this.visible=!1},getResources:function(){var e=this;this.$axiosRequest("/system/resource/getAllResources",{},this.$axiosOptions("get")).then((function(t){e.resources=t.resources}))},getChooseData:function(){var e=this.$refs.tree,t=e.getCheckedNodes(!1,!0),s=[];t.forEach((function(e){s.push(e.id)})),this.role.resourceIds=s},submit:function(){var e=this;this.$refs.roleForm.validate((function(t){t&&e.$axiosRequest("/system/role/addOrModifyRole",JSON.stringify(e.role),e.$axiosOptions("post","application/json")).then((function(t){t.success?(e.$message.success("操作成功!"),e.visible=!1,e.close(),e.searchRole()):e.$message.error(t.msg)}))}))}}}),l=i,n=s("2877"),a=Object(n["a"])(l,o,r,!1,null,null,null);t["default"]=a.exports}}]);