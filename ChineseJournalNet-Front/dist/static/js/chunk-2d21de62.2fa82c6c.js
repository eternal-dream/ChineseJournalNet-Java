(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-2d21de62"],{d2ec:function(e,t,l){"use strict";l.r(t);var o=function(){var e=this,t=e.$createElement,l=e._self._c||t;return l("div",[l("el-dialog",{attrs:{title:e.title,visible:e.visible,width:"40%","before-close":e.close,"close-on-click-modal":!1,inline:!0},on:{"update:visible":function(t){e.visible=t}}},[l("el-form",{ref:"groupForm",attrs:{model:e.group}},[l("el-form-item",{attrs:{label:"用户组名称",prop:"name","label-width":"100px",rules:{required:!0,message:"请输入用户组名称!",trigger:"blur"}}},[l("el-input",{attrs:{placeholder:"请输入用户组名称"},model:{value:e.group.name,callback:function(t){e.$set(e.group,"name",t)},expression:"group.name"}})],1),l("el-card",{staticClass:"box-card",staticStyle:{"margin-top":"5px"}},[l("div",{staticClass:"clearfix",attrs:{slot:"header"},slot:"header"},[l("span",[e._v("文献下载限制规则>>")]),l("el-button",{staticStyle:{float:"right",padding:"3px 0"},attrs:{type:"text"},on:{click:function(t){return e.addRule()}}},[e._v("新增规则")])],1),l("el-form-item",{attrs:{label:"",prop:"downloadRules"}},[l("el-col",{attrs:{span:10}},[e._v("限制类型：")]),l("el-col",{attrs:{span:10}},[e._v("最大下载量：")]),e._l(e.group.downloadRules,(function(t,o){return l("el-row",{key:o,staticStyle:{"margin-bottom":"5px"},attrs:{gutter:5}},[l("el-col",{attrs:{span:10}},[l("el-select",{model:{value:e.group.downloadRules[o].rule,callback:function(t){e.$set(e.group.downloadRules[o],"rule",t)},expression:"group.downloadRules[i].rule"}},e._l(e.$enums.value.downloadRule,(function(e){return l("el-option",{key:e.value,attrs:{value:e.value,label:e.label}})})),1)],1),l("el-col",{attrs:{span:10}},[l("el-input-number",{attrs:{step:1,min:0},model:{value:e.group.downloadRules[o].limit,callback:function(t){e.$set(e.group.downloadRules[o],"limit",t)},expression:"group.downloadRules[i].limit"}})],1),l("el-col",{attrs:{span:4}},[l("el-button",{on:{click:function(t){return e.removeRule(o)}}},[l("d2-icon",{attrs:{name:"minus"}})],1)],1)],1)}))],2)],1)],1),l("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[l("el-button",{on:{click:e.close}},[e._v("取 消")]),l("el-button",{attrs:{"el-button":"",type:"primary"},on:{click:e.submit}},[e._v("确定")])],1)],1)],1)},s=[],i=(l("a434"),l("bc3a")),a=l.n(i),r={props:["allGroups"],data:function(){return{visible:!1,title:"",group:{}}},created:function(){},methods:{show:function(e){this.group=JSON.parse(JSON.stringify(e)),e&&e.id?(this.title="编辑用户组",this.getGroupDownloadRules()):this.title="新增用户组",this.group.downloadRules||(this.group.downloadRules=[]),this.visible=!0},getGroupDownloadRules:function(){var e=this;this.$axiosRequest("system/downloadRules/getRules",{groupId:this.group.id},this.$axiosOptions("get")).then((function(t){e.group.downloadRules=t.downloadRules}))},close:function(){this.$refs.groupForm.resetFields(),this.visible=!1},removeRule:function(e){this.group.downloadRules.splice(e,1)},addRule:function(){var e={rule:this.$enums.value.downloadRule[0].value,limit:1};this.group.downloadRules.push(e),this.group=JSON.parse(JSON.stringify(this.group))},submit:function(){var e=this;this.$refs.groupForm.validate((function(t){t&&a()({method:"post",url:"system/userGroup/addOrModify",data:e.group}).then((function(t){t.data.success?(e.$message.success("操作成功!"),e.visible=!1,e.close(),e.$emit("callback")):e.$message.error(t.data.msg)}))}))}}},u=r,n=l("2877"),d=Object(n["a"])(u,o,s,!1,null,null,null);t["default"]=d.exports}}]);