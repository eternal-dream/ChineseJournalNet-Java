(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-5ffd2c38","chunk-2d21de62"],{d2ec:function(e,t,l){"use strict";l.r(t);var o=function(){var e=this,t=e.$createElement,l=e._self._c||t;return l("div",[l("el-dialog",{attrs:{title:e.title,visible:e.visible,width:"40%","before-close":e.close,"close-on-click-modal":!1,inline:!0},on:{"update:visible":function(t){e.visible=t}}},[l("el-form",{ref:"groupForm",attrs:{model:e.group}},[l("el-form-item",{attrs:{label:"用户组名称",prop:"name","label-width":"100px",rules:{required:!0,message:"请输入用户组名称!",trigger:"blur"}}},[l("el-input",{attrs:{placeholder:"请输入用户组名称"},model:{value:e.group.name,callback:function(t){e.$set(e.group,"name",t)},expression:"group.name"}})],1),l("el-card",{staticClass:"box-card",staticStyle:{"margin-top":"5px"}},[l("div",{staticClass:"clearfix",attrs:{slot:"header"},slot:"header"},[l("span",[e._v("文献下载限制规则>>")]),l("el-button",{staticStyle:{float:"right",padding:"3px 0"},attrs:{type:"text"},on:{click:function(t){return e.addRule()}}},[e._v("新增规则")])],1),l("el-form-item",{attrs:{label:"",prop:"downloadRules"}},[l("el-col",{attrs:{span:10}},[e._v("限制类型：")]),l("el-col",{attrs:{span:10}},[e._v("最大下载量：")]),e._l(e.group.downloadRules,(function(t,o){return l("el-row",{key:o,staticStyle:{"margin-bottom":"5px"},attrs:{gutter:5}},[l("el-col",{attrs:{span:10}},[l("el-select",{model:{value:e.group.downloadRules[o].rule,callback:function(t){e.$set(e.group.downloadRules[o],"rule",t)},expression:"group.downloadRules[i].rule"}},e._l(e.$enums.value.downloadRule,(function(e){return l("el-option",{key:e.value,attrs:{value:e.value,label:e.label}})})),1)],1),l("el-col",{attrs:{span:10}},[l("el-input-number",{attrs:{step:1,min:0},model:{value:e.group.downloadRules[o].limit,callback:function(t){e.$set(e.group.downloadRules[o],"limit",t)},expression:"group.downloadRules[i].limit"}})],1),l("el-col",{attrs:{span:4}},[l("el-button",{on:{click:function(t){return e.removeRule(o)}}},[l("d2-icon",{attrs:{name:"minus"}})],1)],1)],1)}))],2)],1)],1),l("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[l("el-button",{on:{click:e.close}},[e._v("取 消")]),l("el-button",{attrs:{"el-button":"",type:"primary"},on:{click:e.submit}},[e._v("确定")])],1)],1)],1)},s=[],a=(l("a434"),l("bc3a")),n=l.n(a),r={props:["allGroups"],data:function(){return{visible:!1,title:"",group:{}}},created:function(){},methods:{show:function(e){this.group=JSON.parse(JSON.stringify(e)),e&&e.id?(this.title="编辑用户组",this.getGroupDownloadRules()):this.title="新增用户组",this.group.downloadRules||(this.group.downloadRules=[]),this.visible=!0},getGroupDownloadRules:function(){var e=this;this.$axiosRequest("system/downloadRules/getRules",{groupId:this.group.id},this.$axiosOptions("get")).then((function(t){e.group.downloadRules=t.downloadRules}))},close:function(){this.$refs.groupForm.resetFields(),this.visible=!1},removeRule:function(e){this.group.downloadRules.splice(e,1)},addRule:function(){var e={rule:this.$enums.value.downloadRule[0].value,limit:1};this.group.downloadRules.push(e),this.group=JSON.parse(JSON.stringify(this.group))},submit:function(){var e=this;this.$refs.groupForm.validate((function(t){t&&n()({method:"post",url:"system/userGroup/addOrModify",data:e.group}).then((function(t){t.data.success?(e.$message.success("操作成功!"),e.visible=!1,e.close(),e.$emit("callback")):e.$message.error(t.data.msg)}))}))}}},i=r,u=l("2877"),c=Object(u["a"])(i,o,s,!1,null,null,null);t["default"]=c.exports},e05e:function(e,t,l){"use strict";l.r(t);var o=function(){var e=this,t=e.$createElement,l=e._self._c||t;return l("d2-container",{attrs:{type:"full"}},[l("template",{slot:"header"},[l("h4",{staticStyle:{height:"15px"}},[e._v("用户组查询")]),l("el-divider"),l("el-form",{ref:"form",attrs:{model:e.queryParams,size:"small",inline:!0}},[l("el-col",{attrs:{span:12}},[l("el-form-item",{attrs:{label:"用户组名",prop:"name","label-width":"80px"}},[l("el-input",{attrs:{placeholder:"请输入用户组名称"},model:{value:e.queryParams.name,callback:function(t){e.$set(e.queryParams,"name",t)},expression:"queryParams.name"}})],1)],1),l("el-col",{attrs:{span:20}},[l("el-button",{attrs:{type:"success",size:"small"},on:{click:function(t){return e.handleEdit({})}}},[l("d2-icon",{attrs:{name:"plus"}}),e._v("新增")],1),l("el-button",{attrs:{type:"danger",icon:"el-icon-delete",size:"small",disabled:0==e.multipleSelection.length},on:{click:e.deleteAllSelection}},[e._v("删除")]),l("el-button",{attrs:{type:"primary",icon:"el-icon-search",size:"small"},on:{click:e.handleQuery}},[e._v("查询")])],1),l("el-col",{attrs:{span:4}})],1)],1),l("template",{slot:"default"},[l("el-table",{attrs:{data:e.groupList,size:"mini","empty-text":"未查询到用户组信息",stripe:""},on:{"selection-change":e.handleSelectionChange}},[l("el-table-column",{attrs:{type:"selection",width:"55",align:"center",fixed:""}}),l("el-table-column",{attrs:{type:"index",width:"50",label:"序号",align:"center"}}),l("el-table-column",{attrs:{prop:"name",label:"用户组名","min-width":"100px","show-overflow-tooltip":!0,align:"center"}}),l("el-table-column",{attrs:{label:"操作",width:"310px",align:"center",fixed:"right"},scopedSlots:e._u([{key:"default",fn:function(t){return[l("el-button",{staticStyle:{padding:"5px"},attrs:{type:"primary",icon:"el-icon-edit",size:"small"},on:{click:function(l){return e.handleEdit(t.row)}}},[e._v("编辑")]),l("el-button",{staticClass:"red",staticStyle:{padding:"5px"},attrs:{type:"danger",icon:"el-icon-delete",size:"small"},on:{click:function(l){return e.handleDelete(t.row)}}},[e._v("删除")])]}}])})],1),l("div",{staticClass:"pagination"},[l("el-pagination",{attrs:{background:"",layout:"total, prev, pager, next","current-page":e.queryParams.pageNum,"page-size":e.queryParams.pageSize,total:e.total},on:{"current-change":e.handlePageChange}})],1)],1),l("group-form",{ref:"groupForm",attrs:{allGroups:e.allGroups},on:{callback:e.searchGroup}})],2)},s=[],a=(l("4160"),l("159b"),l("bc3a")),n=l.n(a),r=l("d2ec"),i={name:"Group",components:{groupForm:r["default"]},data:function(){return{queryParams:{pageNum:1,pageSize:10},multipleSelection:[],ids:[],groupList:[],allGroups:[],total:0}},created:function(){this.searchGroup()},methods:{searchGroup:function(){var e=this;this.$axiosRequest("/system/userGroup/getGroupPage",this.queryParams,{method:"get"}).then((function(t){e.groupList=t.groupPage.records,e.total=t.groupPage.total}))},handleQuery:function(){this.queryParams.pageNum=1,this.searchGroup()},handleEdit:function(e){this.$refs.groupForm.show(e)},handlePageChange:function(e){this.queryParams.pageNum=e,this.searchGroup()},handleSelectionChange:function(e){this.multipleSelection=e},deleteAllSelection:function(){var e=this;this.ids=[],this.multipleSelection.forEach((function(t){e.ids.push(t.id)})),this.deleteGroup()},handleDelete:function(e){this.ids=[e.id],this.deleteGroup()},deleteGroup:function(){var e=this;0!==this.ids.length?this.$confirm("确定删除选中的用户吗？","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){n()({method:"post",url:"/system/userGroup/deleteGroup",data:e.ids}).then((function(t){t.data.success?(e.$message.success("删除成功!"),e.searchGroup()):e.$message.error(t.data.msg)}))})):this.$message.error("请选择要删除的用户组!")},getAllGroups:function(){var e=this;this.$axiosRequest("/system/userGroup/getAllGroups",{},this.$axiosOptions("get")).then((function(t){e.allGroups=t.allGroups}))}}},u=i,c=l("2877"),p=Object(c["a"])(u,o,s,!1,null,null,null);t["default"]=p.exports}}]);