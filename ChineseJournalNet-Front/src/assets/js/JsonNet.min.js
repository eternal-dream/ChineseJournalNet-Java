String.format=function(){var t,n,i;if(arguments.length==0)return null;for(t=arguments[0],n=1;n<arguments.length;n++)i=new RegExp("\\{"+(n-1)+"\\}","gm"),t=t.replace(i,arguments[n]);return t};String.toSerialize=function(n){var u=function(n){return n.replace(/[\x26\x27\x3C\x3E\x0D\x0A\x22\x2C\x5C\x00]/g,function(n){return ascii=n.charCodeAt(0),"\\u00"+(ascii<16?"0"+ascii.toString(16):ascii.toString(16))})},t,i,r;if(n==null)return null;if(n.constructor==Array){t=[];t.push("[");for(i in n)typeof n[i]!="function"&&(i>0&&t.push(","),t.push(String.toSerialize(n[i])));return t.push("]"),t.join("")}if(n.constructor==Object){t=[];t.push("{");i=0;for(r in n)typeof n[r]!="function"&&(i>0&&t.push(","),t.push(String.format('"{0}":{1}',r,String.toSerialize(n[r]))),i++);return t.push("}"),t.join("")}return n.constructor==Boolean||n.constructor==Number?n.toString():n.constructor==String?String.format('"{0}"',u(n)):n.constructor==Date?String.format('{"__DataType":"Date","__thisue":{0}}',n.getTime()-new Date(1970,0,1,0,0,0).getTime()):this.toString!=undefined?String.toSerialize(n):void 0};