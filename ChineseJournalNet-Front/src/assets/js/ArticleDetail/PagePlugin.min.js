var plugin=function(){function u(t){var h,u;if(!t)throw new Error("请传入配置参数");if($.extend(n,t),n.MaxPage!=0){if(n.ArticleId==undefined)throw"文章ID未定义";if(null==document.getElementById(n.PageDownElmentId)||null==document.getElementById(n.PageUPElmentId)||null==document.getElementById(n.CanvanId)||null==document.getElementById(n.CurrSpan)||null==document.getElementById(n.TotalPageSpan))throw"Dom 节点未定义";return h=document.getElementById(n.CanvanId),i=h.getContext("2d"),u=new Image(1e3,1e3),u.src=decodeURIComponent(n.FirstPageUrl1),u.onload=function(){i.drawImage(u,0,0)},u.onerror=function(){var t=u.src;u.src=decodeURIComponent(n.FirstPageUrl2);u.onerror=null},document.getElementById(n.CurrSpan).innerText=n.PageFirst,document.getElementById(n.TotalPageSpan).innerText=n.MaxPage,document.getElementById(n.PageUPElmentId).disabled=!0,document.getElementById(n.FristPageElmentId).disabled=!0,n.MaxPage==1&&(document.getElementById(n.PageDownElmentId).disabled=!0,document.getElementById(n.LastPageElementId).disabled=!0),document.getElementById(n.PageUPElmentId).onclick=function(){f(n.PageFirst,n)},document.getElementById(n.PageDownElmentId).onclick=function(){e(n.PageFirst,n)},document.getElementById(n.FristPageElmentId).onclick=function(){o(n)},document.getElementById(n.LastPageElementId).onclick=function(){s(n)},document.getElementById(n.dowload).onclick=function(){if(n.Download!=""){var t=n.ArticleId+","+n.Download;window.checklogin(showDownAfterLogin,[t])}},this}}function f(n,i){if(n=n-1,n>=1){var r=[i.ArticleId,n,"up"];window.checklogin(t,r)}}function e(n,i){if(n=n+1,n<=i.MaxPage){var r=[i.ArticleId,n,"down"];window.checklogin(t,r)}}function r(n,t,i){var r=document.createElement("canvas"),f,u;r.width=1e3;r.height=1e3;$("#imgcontent").empty();$("#imgcontent").append(r);window.G_vmlCanvasManager.initElement(r);f=r.getContext("2d");u=new Image(1e3,1e3);u.onload=function(){f.drawImage(u,0,0)};u.src=decodeURIComponent(n)+"&page="+t+"&lngID="+i}function o(n){var i=n.PageFirst/n.PageFirst,r=[n.ArticleId,i,"last"];window.checklogin(t,r);document.getElementById(n.CurrSpan).innerText=n.PageFirst/n.PageFirst}function s(n){var i=n.MaxPage,r=[n.ArticleId,i,"last"];window.checklogin(t,r);document.getElementById(n.CurrSpan).innerText=n.MaxPage}function h(){n.PageFirst==1&&(document.getElementById(n.PageUPElmentId).disabled=!0,document.getElementById(n.FristPageElmentId).disabled=!0,document.getElementById(n.PageDownElmentId).disabled=!1,document.getElementById(n.LastPageElementId).disabled=!1);n.PageFirst!=1&&n.PageFirst<n.MaxPage&&(document.getElementById(n.PageUPElmentId).disabled=!1,document.getElementById(n.FristPageElmentId).disabled=!1,document.getElementById(n.PageDownElmentId).disabled=!1,document.getElementById(n.LastPageElementId).disabled=!1);n.PageFirst==n.MaxPage&&(document.getElementById(n.PageUPElmentId).disabled=!1,document.getElementById(n.FristPageElmentId).disabled=!1,document.getElementById(n.PageDownElmentId).disabled=!0,document.getElementById(n.LastPageElementId).disabled=!0);n.PageFirst>n.MaxPage&&(document.getElementById(n.PageUPElmentId).disabled=!1,document.getElementById(n.FristPageElmentId).disabled=!1,document.getElementById(n.PageDownElmentId).disabled=!0,document.getElementById(n.LastPageElementId).disabled=!0,document.getElementById(n.CurrSpan).innerText=n.MaxPage)}function t(t,u){t!=""&&u!=""&&$.ajax({url:"/Qikan/Article/ArticlePageInfo",data:{ArticleId:t,pageIndex:parseInt(u)},async:!0,type:"post",dataType:"json",beforeSend:function(){loadding()},complete:function(){loaddingClose()},success:function(t){var f,e;t.Result==1?(n.isie8=="1"?r(t.RetValue.Pagefirst,n.PageFirst,n.ArticleId):(f=new Image(1e3,1e3),f.src=decodeURIComponent(t.RetValue.Pagefirst)+"&page="+n.PageFirst+"&lngID="+n.ArticleId,f.onload=function(){i.drawImage(f,0,0)}),n.PageFirst=parseInt(u),document.getElementById(n.CurrSpan).innerText=n.PageFirst,$("html,body").animate({scrollTop:0},1500),h()):(e="/",window.open(e,"_blank"))},error:function(){layer.alert("请求错误",{title:"提示！"})}})}var n={PageFirst:1,MaxPage:0,PageDownElmentId:"downPage",PageUPElmentId:"upPage",CanvanId:"myCanvas",CurrSpan:"CurPage",TotalPageSpan:"TotalPage",FristPageElmentId:"FristPage",LastPageElementId:"LastPage",dowload:"pdfdown",isie8:"0"},i;return{CJPlugin:u}}();